package kr.or.ddit.task.service.impl;

import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import kr.or.ddit.task.mapper.TaskMapper;
import kr.or.ddit.task.service.TaskService;
import kr.or.ddit.vo.AtchFileVO;
import kr.or.ddit.vo.HrtchrVO;
import kr.or.ddit.vo.TaskResultVO;
import kr.or.ddit.vo.TaskVO;

@Service
public class TaskServiceImpl implements TaskService {
	
	@Autowired
	TaskMapper taskMapper;
	
	//과제 게시판 목록
	@Override
	public List<TaskVO> taskList(Map<String, Object> map) {
		return this.taskMapper.taskList(map);
	}
	
	//과제 게시판 총 목록
	@Override
	public int getTotalTask(String clasCode) {
		return this.taskMapper.getTotalTask(clasCode);
	}
	
	//과제 게시글 상세 보기
	@Override
	public TaskVO taskDetail(String taskCode) {
		return this.taskMapper.taskDetail(taskCode);
	}
	
	// 과제 게시글 조회수 증가
	@Override
	public int updateTaskCnt(String taskCode) {
		return this.taskMapper.updateTaskCnt(taskCode);
	}

	// 과제 게시글 등록
	@Override
	public int taskInsert(TaskVO taskVO) {
		return this.taskMapper.taskInsert(taskVO);
	}

	//1) 파일 업로드 후 파일테이블에 insert
	@Override
	public int atchFileInsert(List<AtchFileVO> atchFileVOList) {
		return this.taskMapper.atchFileInsert(atchFileVOList);
	}

	//ATCH_FILE 테이블의 ATCH_FILE_CODE 가져오기
	@Override
	public String getAtchFileCode(String clasCode) {
		return this.taskMapper.getAtchFileCode(clasCode);
	}

	// 첨부 파일 이름 리스트
	@Override
	public List<AtchFileVO> atchFileList(Map<String,Object> map) {
		return this.taskMapper.atchFileList(map);
	}

	// 첨부 파일 삭제(초기화)
	@Override
	public int atchFileDelete(String atchFileCode) {
		return this.taskMapper.atchFileDelete(atchFileCode);
	}
	
	// 교사가 현재 운영 중인 클래스의 코드 찾기
	@Override
	public HrtchrVO getClasCode(String mberId) {
		return this.taskMapper.getClasCode(mberId);
	}

	// 과제 게시글 수정
	@Override
	public int taskUpdate(TaskVO taskVO) {
		return this.taskMapper.taskUpdate(taskVO);
	}

	// 파일 새로 업로드한 경우 업로드 진행
	@Override
	public int atchFileUpdate(List<AtchFileVO> atchFileVOList) {
		return this.taskMapper.atchFileUpdate(atchFileVOList);
	}

	// 과제 게시글 삭제
	@Override
	public int taskDelete(String taskCode) {
		return this.taskMapper.taskDelete(taskCode);
	}
	
	// 과제 제출
	@Override
	public int inputTask(TaskResultVO taskResultVO) {
		return this.taskMapper.inputTask(taskResultVO);
	}

	// (과제 제출용)로그인 한 학생의 반 학생 코드 가져오기
	@Override
	public String getClasStdntCode(String mberId) {
		return this.taskMapper.getClasStdntCode(mberId);
	}

	// 과제 제출 현황 리스트
	@Override
	public List<TaskResultVO> inputTaskList(String taskCode) {
		return this.taskMapper.inputTaskList(taskCode);
	}

	// 제출 과제 삭제
	@Override
	public int myTaskDelete(String taskResultCode) {
		return this.taskMapper.myTaskDelete(taskResultCode);
	}
	
}
